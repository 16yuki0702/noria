{
    "groups": [
        {
            "name": "friend",
            "membership": "SELECT usera AS uid, userb AS gid FROM Friend WHERE usera = ?",
            "policies": [
                {
                    "table": "Photo",
                    "predicate": "SELECT Photo.* FROM Photo, GroupContext, Album WHERE Photo.a_id = Album.a_id AND Album.public = 0 and Album.u_id = GroupContext.id",
                    "description": "users can see photos in albums their friends have posted"
                }
            ]
        },
        {
            "name": "friend_sym",
            "membership": "SELECT userb AS uid, usera AS gid FROM Friend WHERE userb = ?",
            "policies": [
                {
                    "table": "Photo",
                    "predicate": "SELECT Photo.* FROM Photo, GroupContext, Album WHERE Photo.a_id = Album.a_id AND Album.public = 0 and Album.u_id = GroupContext.id",
                    "description": "users can see photos in albums their friends have posted (for symmetry)"
                }
            ]
        }
    ],
    "policies": [
        {
            "table": "Photo",
            "predicate": "SELECT Photo.* FROM Photo, UserContext, Album WHERE Photo.a_id = Album.a_id AND Album.public = 0 AND UserContext.id = Album.u_id",
            "description": "users are allowed to see their own photos"
        },
        {
            "table": "Photo",
            "predicate": "SELECT Photo.* FROM Photo, UserContext, Album WHERE Photo.a_id = Album.a_id AND Album.public = 1",
            "description": "users are allowed to see public photos"
        }
    ]
}
