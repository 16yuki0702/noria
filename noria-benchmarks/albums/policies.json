{
    "groups": [
        {
            "name": "friend",
            "membership": "SELECT usera AS uid, userb AS gid FROM Friend WHERE usera = ?",
            "policies": [
                {
                    "table": "Photo",
                    "predicate": "SELECT Photo.* FROM Photo JOIN Album ON (Photo.a_id = Album.a_id) JOIN GroupContext ON (Album.u_id = GroupContext.id) WHERE Album.public = 0",
                    "description": "users can see photos in albums their friends have posted"
                }
            ]
        },
        {
            "name": "friend_sym",
            "membership": "SELECT userb AS uid, usera AS gid FROM Friend WHERE userb = ?",
            "policies": [
                {
                    "table": "Photo",
                    "predicate": "SELECT Photo.* FROM Photo JOIN Album ON (Photo.a_id = Album.a_id) JOIN GroupContext ON (Album.u_id = GroupContext.id) WHERE Album.public = 0",
                    "description": "users can see photos in albums their friends have posted (for symmetry)"
                }
            ]
        }
    ],
    "policies": [
        {
            "table": "Photo",
            "predicate": "SELECT Photo.* FROM Photo JOIN Album ON (Photo.a_id = Album.a_id) JOIN UserContext ON (UserContext.id = Album.u_id) WHERE Album.public = 0",
            "description": "users are allowed to see their own photos"
        },
        {
            "table": "Photo",
            "predicate": "SELECT Photo.* FROM Photo JOIN Album ON (Photo.a_id = Album.a_id) WHERE Album.public = 1",
            "description": "users are allowed to see public photos"
        }
    ]
}
